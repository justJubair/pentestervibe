import { FC, useEffect, useState } from 'react';

import { FiPhoneCall } from 'react-icons/fi';
import { IoDocumentTextOutline } from 'react-icons/io5';
import { FaLaptopCode } from 'react-icons/fa';
import { GiChampions } from 'react-icons/gi';
import { BiSupport } from 'react-icons/bi';
import { cn } from '../../../../utils/helper';

interface IJourneyItem {
	title: string;
	svg: JSX.Element;
}

const FifthSection: FC = () => {
	const [selected, setSelected] = useState<number>(0);

	const journeyYouWillGetItems: IJourneyItem[] = [
		{
			title: 'Scope Call',
			svg: <FiPhoneCall />,
		},
		{
			title: 'Hands-On Assessment',
			svg: <IoDocumentTextOutline />,
		},
		{
			title: 'Exploit Vulnerabilities',
			svg: <FaLaptopCode />,
		},
		{
			title: 'Submit Professional Report',
			svg: <GiChampions />,
		},
		{
			title: 'Remediation Call',
			svg: <BiSupport />,
		},
	];


	const handleSelected = (id: number) => {
		return setSelected(id);
	}

	useEffect(() => {
		const intervalId = setInterval(() => {
			setSelected((prevSelected) => {
				if (prevSelected < 4) {
					return prevSelected + 1;
				}
				return 0;
			});
		}, 2000);

		return () => clearInterval(intervalId);
	}, [selected]);

	return (
		<div className='relative w-full wrapper mt-20 lg:px-7'>
			<h1 className='w-full flex justify-center h-10'>
				<img
					src='/svg/shapes/home-page/header-journey.svg'
					alt='second-section-header'
				/>
			</h1>

			<div className='relative flex justify-center mt-14'>
				<img
					src='/svg/shapes/home-page/selected-hat.svg'
					alt='fifth-section-selected-shape'
				/>

				<span className='absolute max-w-36 top-2/3 left-1/2 transform -translate-x-1/2 -translate-y-1/2 font-semibold text-lg text-center text-black'>
					{selected === 4 && "Join In"} {selected === 0 && "Join In"} <br /> {journeyYouWillGetItems[selected].title}
				</span>
			</div>

			<div className='mt-8 mb-20 md:pb-28'>
				<div className='relative w-full max-w-3xl mx-auto grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 items-start gap-10'>
					{journeyYouWillGetItems.map((data, index) => (
						<div
							key={index}
							onClick={() => handleSelected(index)}
							className='flex flex-col gap-6 items-center justify-center cursor-pointer'
						>
							<div
								className={`fifth-section-shape ${selected >= index ? "bg-white" : "bg-glass"} backdrop-blur-lg flex items-center justify-center text-2xl`}>
								<span className={`${selected >= index ? "text-primary drop-shadow-2xl shadow-primary" : ""} -ml-3`}>
									{data.svg}
								</span>
							</div>

							<h3
								className={cn('text-gray-400 text-center -mt-4 -ml-3', {
									'text-white': selected >= index,
								})}
							>
								{data.title}
							</h3>
						</div>
					))}
				</div>

				<div className='h-5 bg-gradient-to-r bg-glass rounded-lg bottom-0 w-5/6 mx-auto top-6 relative -z-10 hidden md:block'>
					<div className={`h-5 bg-gradient-to-r from-[#1C1428] to-[#F87DFC] rounded-lg bottom-0 transition-all duration-500 -mt-[150px] relative -z-10 
					${selected === 0 && "w-3/12"}
					${selected === 1 && "w-5/12"}
					${selected === 2 && "w-7/12"}
					${selected === 3 && "w-9/12"}
					${selected === 4 && "w-full"}`}>
					</div>
				</div>
			</div>
		</div >
	);
};

export default FifthSection;
