import { FC, FormEvent, useRef } from 'react';
import { Link } from 'react-router-dom';
import { FaFacebookSquare, FaTwitter } from 'react-icons/fa';
import { FaYoutube } from "react-icons/fa";

import { navLinks } from '../../assets/nav-links';
import emailjs from "@emailjs/browser";

const Footer: FC = () => {
	const form = useRef<HTMLFormElement>(null);

	const socialLinks = [
		{
			icon: <FaFacebookSquare />,
			path: 'https://www.facebook.com/pentestervibe',
		},
		{
			icon: <FaYoutube />,
			path: 'https://www.youtube.com/@PentesterVibe',
		},
		{
			icon: <FaTwitter />,
			path: 'https://www.twitter.com/pentestervibe',
		}
	]
	console.log(import.meta.env.PUBLIC_KEY)

	const sendEmail = (e: FormEvent<HTMLFormElement>) => {
		e.preventDefault();

		emailjs
			.sendForm(
				'service_kc229as',
				'template_no3arcj',
				form.current || "",
				'1IxzJuhGQu0VMzu4n'
			)
			.then(
				(result) => {
					console.log(result.text);
					console.log("message sent");
				},
				(error) => {
					console.log(error);
				}
			);
	};



	return (
		<div className='w-full bg-gradient-to-r from-[#DA84DD] to-[#A949CF] py-10 mt-28 rounded-t-3xl'>
			<div className='relative w-full wrapper mx-auto lg:px-7'>
				<div className='flex flex-col md:flex-row items-center justify-center'>
					<div className='md:w-1/2 flex flex-col'>
						<div className='h-14 mt-5 mx-auto md:mx-0'>
							<img
								src='/svg/logo-with-text.svg'
								alt='logo'
								className='h-full'
							/>
						</div>

						<div className='flex flex-wrap items-center justify-center md:justify-start gap-x-10 gap-y-4 mt-8 font-medium'>
							{navLinks.map((link, index) => (
								<Link key={index} to={link.path}>
									{link.title}
								</Link>
							))}
						</div>

						<div className='flex justify-center md:justify-start items-center gap-6 mt-8 -ml-1'>
							{socialLinks.map((link, index) => (
								<a
									href={link?.path}
									key={index}
									target='_blank'
									className='flex items-center justify-center text-3xl text-white'
								>
									{link?.icon}
								</a>
							))}
						</div>
						<div className='mt-8 text-center mb-4 md:text-left font-medium'>
							<Link to='#terms'>Terms & Policy</Link>
						</div>
					</div>

					<div className='md:w-1/2'>
						<img
							src='/svg/footer-shape.svg'
							alt='footer-shape'
							className='-mt-20 hidden md:block'
						/>

						<form ref={form} onSubmit={sendEmail}>
							<div className='bg-glass backdrop-blur-md rounded-3xl md:-mt-6 flex items-center overflow-hidden'>
								<input
									type='email'
									name='email'
									id='email'
									placeholder='Enter Your Email'
									className='md:py-8 py-3 px-2 sm:py-4 sm:px-5 md:px-10 md:flex-grow bg-transparent w-40 md:w-full outline-none text-white'
								/>

								<button type='submit' className='md:py-8 py-3 px-6 sm:py-4 sm:px-5 md:px-20 text-lg rounded-3xl font-medium text-black bg-white'>
									Send
								</button>
							</div>
						</form>
					</div>
				</div>

				<p className='text-center text-gray-800 mt-10'>
					All Rights Reserved to PentesterVibe 2024
				</p>
			</div>
		</div>
	);
};

export default Footer;
